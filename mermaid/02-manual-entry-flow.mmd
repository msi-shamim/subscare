%% ============================================================
%% SECTION 2: MANUAL ENTRY DATA FLOW
%% ============================================================

flowchart TB
    subgraph MANUAL["MANUAL ENTRY FLOW"]
        direction TB

        M_START([User Opens App]) --> M_NAV{Navigation Choice}

        M_NAV -->|"+ Button"| M_TYPE{Entry Type}
        M_NAV -->|"Subscription Tab"| M_SUB_LIST[View Subscriptions]

        M_TYPE -->|"Transaction"| M_TXN_FORM[Transaction Form]
        M_TYPE -->|"Subscription"| M_SUB_FORM[Subscription Form]

        %% Transaction Form Flow
        M_TXN_FORM --> M_TXN_AMOUNT[Enter Amount]
        M_TXN_AMOUNT --> M_TXN_TYPE[Select Debit/Credit]
        M_TXN_TYPE --> M_TXN_CAT[Select Category]
        M_TXN_CAT --> M_TXN_DATE[Pick Date/Time]
        M_TXN_DATE --> M_TXN_NOTES[Add Notes - Optional]
        M_TXN_NOTES --> M_TXN_ATTACH[Add Attachments - Optional]
        M_TXN_ATTACH --> M_TXN_SAVE[Save Transaction]

        %% Subscription Form Flow
        M_SUB_FORM --> M_SUB_NAME[Enter Name]
        M_SUB_NAME --> M_SUB_AMOUNT[Enter Amount]
        M_SUB_AMOUNT --> M_SUB_CAT[Select Category]
        M_SUB_CAT --> M_SUB_FREQ[Select Frequency]
        M_SUB_FREQ --> M_SUB_START[Set Start Date]
        M_SUB_START --> M_SUB_AUTO{Auto-Pay?}
        M_SUB_AUTO -->|Yes| M_SUB_REMIND[Configure Reminder]
        M_SUB_AUTO -->|No| M_SUB_REMIND
        M_SUB_REMIND --> M_SUB_SAVE[Save Subscription]

        %% Database Operations
        M_TXN_SAVE --> M_DB_TXN[(Hive: transactions)]
        M_SUB_SAVE --> M_DB_SUB[(Hive: subscriptions)]
        M_SUB_SAVE --> M_SCHEDULE[Schedule Reminder]
        M_SCHEDULE --> M_DB_REM[(Hive: reminders)]

        %% Update Dashboard
        M_DB_TXN --> M_REFRESH[Refresh Dashboard]
        M_DB_SUB --> M_REFRESH
        M_REFRESH --> M_LEDGER[Update Ledger View]
        M_REFRESH --> M_ANALYTICS[Update Analytics]

        M_SUB_LIST --> M_SUB_DETAIL[View Details]
        M_SUB_DETAIL --> M_SUB_EDIT[Edit Subscription]
        M_SUB_EDIT --> M_SUB_FORM
    end

    style MANUAL fill:#E8F5E9,stroke:#2E7D32
    style M_DB_TXN fill:#BBDEFB,stroke:#1976D2
    style M_DB_SUB fill:#BBDEFB,stroke:#1976D2
    style M_DB_REM fill:#BBDEFB,stroke:#1976D2
